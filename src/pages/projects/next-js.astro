---
/* eslint-disable max-lines */
import { getEntry } from 'astro:content';
import ProjectHero from '../../components/ProjectHero.astro';
import ProjectLayout from '../../layouts/ProjectLayout.astro';
import ColsLeft from '../../components/rows/ColsLeft.astro';
import CustomImage from '../../components/CustomImage.astro';
import ColsRight from '../../components/rows/ColsRight.astro';
import AboutLine from '../../components/AboutLine.astro';
import { SchemaBuilder } from '../../services/schema_builder';

const project = await getEntry('projects', 'next-js');

const academyDescription =
  'Full-stack learning platform built with Next.js 15, TypeScript, and Server Components. Implemented tiered membership system, video streaming, ' +
  'and course management with Server Actions. Led technical architecture and development team while maintaining 80% test coverage.';

// Use the schema builder service instead of manually creating schemas
const nextjsSchema = SchemaBuilder.createProjectSchema({
  name: 'Next.js Development Projects by Steve Ferguson',
  description: 'Comprehensive Next.js development projects showcasing server components, application refactors, and modern deployment strategies using Cloudflare Workers.',
  programmingLanguage: ['TypeScript', 'JavaScript', 'Next.js', 'React'],
  tools: [
    'Next.js',
    'React',
    'TypeScript',
    'Cloudflare Workers',
    'Cloudflare Pages',
    'Server Components',
    'Server Actions'
  ],
  keywords: [
    'Next.js Development',
    'React Applications',
    'Server Components',
    'TypeScript',
    'Cloudflare Workers',
    'Application Refactoring',
    'Full Stack Development',
    'Edge Computing'
  ],
  dateCreated: '2022'
});
---

<ProjectLayout
  title="Next.js Development Projects by Steve Ferguson - React Server Components & TypeScript"
  description="Steve Ferguson's Next.js development expertise: server components, application refactors, Cloudflare Workers deployment, and modern React patterns. Saved $60k/month through vendor elimination and architecture optimization."
  keywords="steve ferguson next.js, next.js developer, react server components, typescript development, cloudflare workers, next.js refactoring, server actions, edge computing, full stack developer, react applications"
  image="/assets/projects/Next.js.png"
  type="article"
  schema={nextjsSchema}
>
  <ProjectHero
    title={project.data.title}
    year={project.data.year}
    subtitle={project.data.subtitle}
    category={project.data.category}
    cover={project.data.cover}
  />

  <ColsLeft title="server & client architecture">
    <div slot="col1">
      <AboutLine
        title="Online Learning Academy"
        description={academyDescription}
      />
      <AboutLine title="User Dashboard" description="Real-time data aggregation with Next.js 15 Server Components and TypeScript" />
      <AboutLine title="Email Preference Center" description="Server Actions with TypeScript for Brazil API integration and user preferences" />
      <AboutLine title="User Invoices" description="Custom invoicing system with Next.js replacing $60k/month vendor dependency" />
    </div>

    <CustomImage
      slot="col2"
      src={import('../../assets/code.jpg')}
      alt="Next.js Server Components"
      width={1920}
      height={1200}
    />
  </ColsLeft>

  <ColsRight title="application refactors">
    <div slot="col2">
      <AboutLine title="User Login Portal Refactor" description="Migrated from Create React App with TypeScript bit by bit" />
      <AboutLine title="Reciprocity UI" description="From a Wordpress site, to a headless app using platform API" />
    </div>

    <div slot="col1" class="refactor-showcase">
      <div class="showcase-header">
        <h4>Refactor Impact</h4>
        <p>Legacy system modernization</p>
      </div>

      <div class="features-list">
        <div class="feature-item">
          <div class="feature-icon">üß™</div>
          <div class="feature-text">
            <strong>500+ Tests</strong>
            <span>Comprehensive test coverage</span>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üí∞</div>
          <div class="feature-text">
            <strong>$60k/month Saved</strong>
            <span>Vendor cost elimination</span>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üìà</div>
          <div class="feature-text">
            <strong>1000+ Lines Reduced</strong>
            <span>Context file optimization</span>
          </div>
        </div>
      </div>
    </div>
  </ColsRight>

  <ColsLeft title="deployment strategies">
    <div slot="col1">
      <AboutLine title="OpenNext" description="Cloudflare Workers deployment for Next.js applications" />
      <AboutLine title="Next on Cloudflare Pages" description="Edge optimization and global distribution" />
    </div>

    <div slot="col2" class="deployment-overview">
      <div class="overview-header">
        <h4>Modern Deployment</h4>
        <p>Edge computing and performance optimization</p>
      </div>

      <div class="features-list">
        <div class="feature-item">
          <div class="feature-icon">‚ö°</div>
          <div class="feature-text">
            <strong>Edge Computing</strong>
            <span>Cloudflare Workers integration</span>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üåç</div>
          <div class="feature-text">
            <strong>Global Distribution</strong>
            <span>Cloudflare Pages deployment</span>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üöÄ</div>
          <div class="feature-text">
            <strong>Performance Optimized</strong>
            <span>Server-side rendering benefits</span>
          </div>
        </div>
      </div>
    </div>
  </ColsLeft>

  <ColsRight title="technology stack">
    <div slot="col2">
      <div class="tech-summary">
        <h4>Next.js Expertise</h4>
        <p>Full-stack React applications with modern patterns</p>
      </div>
    </div>

    <div slot="col1" class="tech-spotlight">
      <div class="spotlight-header">
        <h4>Core Technologies</h4>
        <p>Production-ready Next.js stack</p>
      </div>

      <div class="tech-list">
        <div class="tech-item nextjs">
          <span class="tech-name">Next.js 15</span>
          <span class="tech-desc">Server components & actions</span>
        </div>
        <div class="tech-item typescript">
          <span class="tech-name">TypeScript</span>
          <span class="tech-desc">Type-safe development</span>
        </div>
        <div class="tech-item cloudflare">
          <span class="tech-name">Cloudflare</span>
          <span class="tech-desc">Edge deployment</span>
        </div>
        <div class="tech-item testing">
          <span class="tech-name">Testing Suite</span>
          <span class="tech-desc">500+ comprehensive tests</span>
        </div>
      </div>
    </div>
  </ColsRight>
</ProjectLayout>

<style>
  .refactor-showcase, .deployment-overview, .tech-spotlight {
    padding: var(--spacingXL); height: 100%; display: flex; flex-direction: column; justify-content: center;
  }
  .showcase-header, .overview-header, .spotlight-header { margin-bottom: var(--spacingXL); text-align: center; }
  .showcase-header h4, .overview-header h4, .spotlight-header h4 {
    font-size: var(--fontSizeLg); margin-bottom: var(--spacingSm); color: var(--colorTextPrimary);
  }
  .showcase-header p, .overview-header p, .spotlight-header p {
    color: var(--colorTextSecondary); font-size: var(--fontSizeSm);
  }
  .features-list { display: flex; flex-direction: column; gap: var(--spacingLg); }
  .feature-item {
    display: flex; align-items: flex-start; gap: var(--spacingMd); padding: var(--spacingMd);
    background: rgba(255,255,255,0.02); border-radius: var(--borderRadius); transition: background 0.2s ease;
  }
  .feature-item:hover { background: rgba(255,255,255,0.05); }
  .feature-icon { font-size: var(--fontSizeLg); min-width: 2rem; }
  .feature-text { display: flex; flex-direction: column; gap: var(--spacingXs); }
  .feature-text strong { color: var(--colorTextPrimary); font-size: var(--fontSizeMd); }
  .feature-text span { color: var(--colorTextSecondary); font-size: var(--fontSizeSm); }
  .tech-list { display: flex; flex-direction: column; gap: var(--spacingMd); }
  .tech-item {
    display: flex; flex-direction: column; padding: var(--spacingMd) var(--spacingLg);
    border-radius: var(--borderRadius); border-left: 3px solid; transition: transform 0.2s ease;
  }
  .tech-item:hover { transform: translateX(4px); }
  .tech-item.nextjs { border-left-color: #000000; background: rgba(0, 0, 0, 0.1); }
  .tech-item.typescript { border-left-color: #3178c6; background: rgba(49, 120, 198, 0.1); }
  .tech-item.cloudflare { border-left-color: #f38020; background: rgba(243, 128, 32, 0.1); }
  .tech-item.testing { border-left-color: #4caf50; background: rgba(76, 175, 80, 0.1); }
  .tech-name { font-weight: var(--fontWeightMd); color: var(--colorTextPrimary); margin-bottom: var(--spacingXs); }
  .tech-desc { font-size: var(--fontSizeSm); color: var(--colorTextSecondary); }
  .tech-summary {
    padding: var(--spacingXL); height: 100%; display: flex; flex-direction: column; justify-content: center; text-align: center;
  }
  .tech-summary h4 { font-size: var(--fontSizeXL); margin-bottom: var(--spacingMd); color: var(--colorTextPrimary); }
  .tech-summary p { color: var(--colorTextSecondary); font-size: var(--fontSizeLg); }
</style>
